<div class="panel panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
  		<div class="panel-title inspection-title">
        Valuables
        <button class="btn btn-success btn-xs pull-right" type="submit" ng-click="addValuable(inspection)">Add Valuable</button>
      </div>
  	</div>
    <ul class="list-group">
      <li class="list-group-item" ng-repeat="valuable in inspection.valuables">
        <div class="row">
          <div class="col-md-8">
            <form class="form-inline">
              <span class="btn-toggle glyphicon glyphicon-plus" data-toggle="collapse" 
              data-parent="#accordion" href="#valuable_{{ valuable.id }}"></span> 
    		      <span class="clicktoedit" ng-hide="valuable.editing" ng-click="valuable.editing = true">{{ valuable.name }}
                <span class="glyphicon glyphicon-pencil edit-icon"></span>
              </span>
    					<span ng-show="valuable.editing">
    						<div class="form-group"><input type="text" class="form-control" ng-model="valuable.name"></div>
    						<button class="btn btn-success btn-sm" type="submit" ng-click="valuable.editing = false; editValuable(valuable)">Save</button>
    					</span>
            </form>
          </div>
          <div class="col-md-4">
  					<button class="btn-room-delete btn btn-xs btn-danger pull-right" ng-click="deleteValuable(valuable,$index)">
  						<span class="glyphicon glyphicon-trash"></span>
  					</button>
          </div>
        </div>
        <div id="valuable_{{ valuable.id }}" class="panel-collapse collapse out">
  				<div class="panel-body">
            <form ng-submit="editValuable(valuable);editValuableForm.$dirty=false;" name="editValuableForm">
    					<div class="form-group row">
    						<div class="col-md-4">
    							<input class="form-control" ng-model="valuable.serial_number" placeholder="Serial Number">
                </div>
                <div class="col-md-4">
                  <input class="form-control" ng-model="valuable.comments" placeholder="Comments">
    						</div>                
                <div class="col-md-4" ng-show="editValuableForm.$dirty">
        					<button class="btn btn-success btn-sm" type="submit">Save</button>
                </div>
    					</div>
            </form>
        		<div class="row">
        			<div ng-controller="ImageController" class="col-md-2">
        				<form ng-upload="uploadValuableImage(content,$index)" action="/images" upload-options-enable-rails-csrf>
        					<span ng-show="uploadStatus == 'nofile'" class="btn btn-success fileinput-button">
        						<i class="glyphicon glyphicon-plus"></i>
        						<span>Select an image to upload</span>
        						<input type="file" name="image[asset]" onchange="angular.element(this).scope().setFiles(this)">
        					</span>
        					<input type='hidden' name='image[imageable_id]' value='{{valuable.id}}'>
        					<input type='hidden' name='image[imageable_type]' value='Valuable'>
        					<button ng-show="uploadStatus == 'uploading'" class="btn btn-warning" disabled>
        						<i class="glyphicon glyphicon-cloud-upload"></i>
        						<span>Uploading {{ files[0].name }}</span>
        					</button>
        					<button ng-show="uploadStatus == 'hasfile'" class="btn btn-success" upload-submit ng-click="startUpload()">
        						<i class="glyphicon glyphicon-arrow-up"></i>
        						<span>Upload {{ files[0].name }}</span>
        					</button>
        				</form>
        			</div>
        		</div>
        		<div class="row room-detail-item image-grid">
        		  <div ng-repeat="image in valuable.images" class="col-md-2">
        		    <div class="thumbnail">
        		      <img ng-src="{{ image.asset.asset.thumb.url }}">
        					<input type="text" ng-model="image.comment" class="image-comment form-control" 
        														 placeholder="Comments" ng-change="addImageComment(image, image.comment)">
        					<button class="btn-image-delete btn btn-xs btn-danger pull-right" ng-click="deleteValuableImage($parent.$index,image,$index)">
        						<span class="glyphicon glyphicon-trash"></span>
        					</button>
        		    </div>
        		  </div>
        		</div>
          </div>
        </div>
      </li>
    </ul>    
  </div>
</div>